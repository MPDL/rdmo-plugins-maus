{% if widget.sortable %}
    {% if widget.select_all_option %}
        {% include widget.select_all_option.template_name with widget=widget.select_all_option index=widget.select_all_option.index %}
    {% endif %}
    <div {% if widget.attrs.id %} id="selected_{{ widget.attrs.id }}"{% endif %} class="selected" >
        {% for option in widget.optgroups %}
            {% if option.selected %}
                <div class="choice-block" id="{{ option.index }}" >
                    {% include option.template_name with widget=option index=option.index sortable=widget.sortable %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
    <div {% if widget.attrs.id %} id="unselected_{{ widget.attrs.id }}"{% endif %} class="unselected" >
        {% for option in widget.optgroups %}
            {% if not option.selected %}
                <div class="choice-block" id="{{ option.index }}" >
                    {% include option.template_name with widget=option index=option.index sortable=widget.sortable %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
{% else %}
    {% for option in widget.optgroups %}
        {% include option.template_name with widget=option index=option.index %}
    {% endfor %}
{% endif %}

